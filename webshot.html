<!--
  Copyright (c) 2018 Kota Suizu
  Released under the MIT license
  http://opensource.org/licenses/mit-license.php
-->

<script type="text/x-red" data-template-name="WebShot">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
    <input type="text" id="node-input-url" placeholder="URL">
  </div>
</script>

<script type="text/x-red" data-help-name="WebShot">
  <p>This node takes a screenshot of the webpage.</p>
  <p>
    Set the following in the node setting or in the input payload.:
    <ul>
      <li><code>msg.payload.url</code> : <Strong>(required String)</Strong> URL of WebPage to take screenshot.</li>
      <li><code>msg.payload.options{}</code> : (Object) An options object can be passed as the parameter directly call to webshot.</li>
    </ul>
  </p>
  <p>
    The output message is below:
    <ul>
      <li><code>payload</code> is a base64 encoded string of screenshot (PNG).</li>
    </ul>
  </p>
</script>

<script type="text/javascript">
  RED.nodes.registerType('WebShot', {
    category: 'function',
    defaults: {
      name: {
        value: ""
      },
      url: {
        value: ""
      }
    },
    color: "#00A0E2",
    inputs: 1,
    outputs: 1,
    icon: "icon.svg",
    label: function() {
      return this.name || "WebShot";
    },
    labelStyle: function() {
      return this.name ? "node_label_italic" : "";
    }
  });
</script>
